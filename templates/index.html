<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{url_for('static', filename='css/main.css')}}">
    <title>2048</title>
 
</head>
<body>

    <div class="title-area">
        <h1>2048</h1>
        <h3>Join the numbers and get to the 2048 tile <br>...or watch the AI player do its thing.</h3>
    </div>
    

    <div class="vertical-flex-container">
        <div style="display:inline">
        <input type="button" id="new_game_btn" value="New Game">
        {% if data['agent'] == 'human' %}
            <input type="button" id="run_stop_ai_btn" value="Run AI">
        {% else %}
            <input type="button" id="run_stop_ai_btn" value="Stop AI">
        {% endif %}
    </div>
    
   
    
    <form method="post" action="{{ url_for('index') }}" id="form">
        <input type="hidden" name="json_data" id="json_data" value = "">
    </form>

    <form hx-post="{{ url_for('index') }}" id="form2" hx-target="#mygrid" hx-swap="outerHTML" hx-trigger="every 1s">
        <input type="hidden" name="json_data" id="json_data2" value = "">
    </form>

     <div class="grid" id="mygrid">
    {% for i in range(4) %}
        {% for j in range(4) %}
            {% if data["grid"][i][j] != 0 %}
                <div class="tile_value_{{data["grid"][i][j]|string}}">{{data["grid"][i][j]}}</div>
            {% else %}
                <div class="tile_value_0"></div>
            {% endif %}   
        {% endfor %}
    {% endfor %}
    </div>


    <script>
        js_data = JSON.parse('{{ data | tojson | safe}}')
        js_data["requested_action"] = "run_ai";
        document.getElementById("json_data2").value = JSON.stringify(js_data);
    </script>  

    <script src= "../static/js/eventlisteners.js"></script>
    <script src= "../static/js/main.js"></script>  
    <!-- Load htmx -->
    <script src="https://unpkg.com/htmx.org@1.4.1"></script>
</body>
</html>